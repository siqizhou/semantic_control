<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Semantic Control</title>
  <meta name="description" content="Semantic Control Website." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>⚪️</text></svg>">

  <!-- Font: Roboto Slab -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@200;300;400;500&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0e0f12;
      --text: #ffffff;
      --muted: #b7c0cc;
      --brand: #87d6ff;
      --brand-2: #a7ffb7;
      --card: #151821;
      --border: #232736;
      --maxw: 1024px;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg: #ffffff;
        --text: #0d1017;
        --muted: #3b4756;
        --brand: #005bff;
        --brand-2: #00a86b;
        --card: #f4f7fb;
        --border: #e6ebf2;
      }
    }

    *,*::before,*::after{ box-sizing: border-box; }
    html{ scroll-behavior: smooth; }

    body{
      margin: 0; 
      --chosen-font: 'Roboto Slab';
      font: 200 16px/1.6 var(--chosen-font), serif;
      color: var(--text); 
      background: var(--bg);
    }

    img{ max-width: 100%; display: block; }
    a{ color: inherit; text-decoration: none; }
    p{ margin: 0 0 1rem; color: var(--muted); font-weight: 300; }

    h1,h2,h3{ margin: 0 0 .6rem; line-height: 1.25; font-family: var(--chosen-font), serif; font-weight: 300; }

    .wrap{ max-width: var(--maxw); margin: 0 auto; padding: 0 1rem; }

    .site-header{
      position: sticky; top: 0; z-index: 10; backdrop-filter: saturate(180%) blur(8px);
      background: color-mix(in oklab, var(--bg) 80%, transparent);
      border-bottom: 1px solid var(--border);
    }
    .nav{ display: flex; align-items: center; justify-content: space-between; padding: .75rem 0; }
    .brand{ font-weight: 200; letter-spacing: .5px; font-family: var(--chosen-font), serif; }
    .brand .dot{ color: var(--brand); }
    .links{ display: flex; gap: 1rem; font-family: var(--chosen-font), serif; font-weight: 200; }
    .links a{ opacity: .9; }
    .links a:hover{ color: var(--brand); }

    .hero{ padding: 0 0 2.5rem; position: relative; }
    .banner{
      width: 100%;
      aspect-ratio: 3 / 2;
      overflow: hidden;
      position: relative;
      background: #ffffff;
    }
    .banner img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }
    .banner .overlay-text{
      position: absolute;
      top: 60%;
      left: 5%;
      color: #333333;
      font-size: clamp(1.8rem, 5vw, 2.8rem);
      font-weight: 200;
      text-align: left;
      font-family: var(--chosen-font), serif;
      letter-spacing: .5px;
      z-index: 2;
    }
    .banner .overlay-subtitle{
      position: absolute;
      top: calc(60% + 3.5rem);
      left: 5%;
      color: #333333;
      font-size: clamp(0.8rem, 2.5vw, 1.1rem);
      font-weight: 200;
      text-align: left;
      font-family: var(--chosen-font), serif;
      z-index: 2;
    }
    @media (max-width: 768px) {
      .banner .overlay-subtitle{
        top: calc(60% + 3rem);
      }
    }
    .banner::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      background: linear-gradient(to top, rgba(255,255,255,0.99), rgba(255,255,255,0));
      pointer-events: none;
    }
    .intro{ padding: 1.5rem 0 0.5rem; text-align: center; }
    .intro .subtitle{ font-size: 1rem; font-style: italic; font-weight: 200; }

    .paper-card{ background: #f5f5f5; padding: 1rem; display: grid; gap: .5rem; font-weight: 300; }
    .paper-card h3{ font-weight: 400; }
    .paper-card .figure-placeholder{ width: 100%; aspect-ratio: 1/1; background: #e8e8e8; display: flex; align-items: center; justify-content: center; color: #888888; font-size: .9rem; font-style: italic; margin-bottom: .5rem; }

    .tags{ display: flex; flex-wrap: wrap; gap: .4rem; }
    .tag{ font-size: .8rem; padding: .2rem .5rem; border: 1px solid var(--border); border-radius: 999px; color: var(--muted); font-weight: 300; }
    .links-row{ display: flex; gap: .8rem; flex-wrap: wrap; font-weight: 300; }

    section{ padding: 2.5rem 0; }
    .grid{ display: grid; gap: 1.2rem; }
    @media (min-width: 1200px){ .grid.cols-4{ grid-template-columns: repeat(4, 1fr); } }
    @media (min-width: 900px){ .grid.cols-3{ grid-template-columns: repeat(3, 1fr); } }
    @media (min-width: 600px){ .grid.cols-2{ grid-template-columns: repeat(2, 1fr); } }

    .site-footer{ padding: 2.5rem 0; border-top: 1px solid var(--border); color: var(--muted); font-size: .9rem; font-style: italic; font-family: var(--chosen-font), serif; font-weight: 200; }
    .site-footer a{ color: var(--brand); }

    /* Thumbnail rule */
    .paper-card .thumb{
      width: 100%;
      aspect-ratio: 1/1;
      object-fit: cover;
      background: #e8e8e8;
      margin-bottom: .5rem;
      display: block;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="wrap nav">
      <a href="index.html" class="brand">Semantic Control<span class="dot">.</span></a>
      <nav class="links" aria-label="Primary">
        <a href="index.html">Home</a>
        <a href="categories/index.html">Categories</a>
        <a href="people/index.html">People</a>
      </nav>
    </div>
  </header>

  <main id="home" class="wrap">
    <section class="hero" aria-label="Site banner">
      <div class="banner" role="img" aria-label="Top banner image">
        <img src="assets/images/banner.jpg" alt="Semantic Control Banner" />
        <div class="overlay-text">semantic control</div>
        <div class="overlay-subtitle">perceive and act through robots' lenses</div>
      </div>
      <div class="intro"></div>
    </section>

    <section id="papers" aria-label="Papers">
       <div id="papers-grid" class="grid cols-4" role="list"></div>
      <template id="paper-card-template">
        <article class="paper-card" role="listitem">
          <img class="thumb" alt="">
          <h3 class="title"></h3>
          <p class="meta"></p>
          <div class="tags"></div>
          <p class="links-row"></p>
        </article>
      </template>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>© <span id="year"></span> Semantic Control</p>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <script>
  (async function loadPapers(){
    const grid = document.getElementById('papers-grid');
    const tpl  = document.getElementById('paper-card-template');

    function addLinks(container, entries){
      const items = Object.entries(entries).filter(([,url]) => !!url);
      items.forEach(([label, url], i) => {
        const a = document.createElement('a');
        a.href = url;
        a.textContent = label;
        a.target = "_blank";
        a.rel = "noopener";
        container.appendChild(a);
        if (i < items.length - 1) container.append(" · ");
      });
    }

    async function loadOne(filename){
      const res = await fetch(`projects/${filename}`);
      if (!res.ok) throw new Error(`Failed to load ${filename}`);
      const data = await res.json();
      data._file = filename;
      return data;
    }

    try{
      const manifestRes = await fetch('projects/manifest.json');
      if (!manifestRes.ok) throw new Error('Failed to load projects/manifest.json');
      const files = await manifestRes.json();

      const projects = await Promise.all(files.map(loadOne));

      projects.sort((a, b) =>
        (b.order || 0) - (a.order || 0) ||
        (b.year || 0) - (a.year || 0) ||
        String(a.title).localeCompare(String(b.title))
      );

      for (const p of projects){
        const node = tpl.content.cloneNode(true);
        const card = node.querySelector('.paper-card');

        // Thumbnail or placeholder
        const img = node.querySelector('.thumb');
        if (p.thumb){
          img.src = p.thumb;
          img.alt = `${p.title} figure`;
        } else {
          img.replaceWith(Object.assign(document.createElement('div'), {
            className: 'figure-placeholder',
            textContent: 'Figure Placeholder'
          }));
        }

        // Title
        node.querySelector('.title').textContent = p.title || 'Untitled';

        // Meta
        const yy = p.year ? String(p.year).slice(-2) : '';
        const authors = Array.isArray(p.authors) ? p.authors.join(', ') : (p.authors || '');
        node.querySelector('.meta').textContent =
          [p.venue, yy ? `’${yy}` : ''].filter(Boolean).join(' ') +
          (authors ? ` · ${authors}` : '');

        // Tags
        const tagsEl = node.querySelector('.tags');
        (p.tags || []).forEach(tag => {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = tag;
          tagsEl.appendChild(span);
        });

        // Links
        const linksEl = node.querySelector('.links-row');
        addLinks(linksEl, {
          PDF: p.pdf,
          Code: p.code
        });

        grid.appendChild(card);
      }
    } catch(err){
      console.error(err);
      grid.insertAdjacentHTML('beforebegin',
        `<p class="intro">Could not load projects. Please check <code>projects/manifest.json</code> and JSON files.</p>`
      );
    }
  })();
  </script>
</body>
</html>